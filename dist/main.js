/*! For license information please see main.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/css/styles.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://bookshop-on-google-books-api/./src/css/styles.css?")},"./src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _js_slider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/slider */ "./src/js/slider.js");\n/* harmony import */ var _js_slider__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_js_slider__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _js_books__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/books */ "./src/js/books.js");\n/* harmony import */ var _js_books__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_js_books__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _css_styles_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./css/styles.css */ "./src/css/styles.css");\n\r\n\r\n\n\n//# sourceURL=webpack://bookshop-on-google-books-api/./src/index.js?')},"./src/js/books.js":()=>{eval('document.addEventListener("DOMContentLoaded", () => {\r\n    bookRequest("Architecture", 0);\r\n    document.querySelector(":root").style.setProperty("--hidden", "hidden");\r\n    if (localStorage.getItem("cartCount") === null) {\r\n      cart.dataset.styleType = "0";\r\n    } else {\r\n      cart.dataset.styleType = localStorage.getItem("cartCount");\r\n      document.querySelector(":root").style.setProperty("--hidden", "visible");\r\n    }\r\n    cartCheck();\r\n});\r\n    \r\nlet cards = document.querySelector(".cards");\r\nlet catalog = document.querySelectorAll(".catalog_ul_a");\r\nlet loadMore = document.querySelector(".load_more");\r\nlet cart = document.querySelector(".cart");\r\nconst BUYNOW = "BUY NOW";\r\nconst INTHECART = "IN THE CART";\r\nconst formatter = new Intl.NumberFormat("ru-RU", {\r\n    style: "currency",\r\n    currency: "RUB",\r\n});\r\n\r\n\r\nfunction bookRequest(category, startPositon) {\r\n    fetch(`https://www.googleapis.com/books/v1/volumes?q="subject:${category}"&key=AIzaSyA1qT-iIe0RjxacQSFVui1sCk38szrgrcE&printType=books&startIndex=${startPositon}&maxResults=6&langRestrict=en`)\r\n    .then((response) => {\r\n        return response.json();\r\n    })\r\n    .then((data) => {\r\n        console.log(data);\r\n        for (let i = 0; i < data.items.length; i++) {\r\n            cards.innerHTML += `\r\n            <div class="card">\r\n                ${data.items[i].volumeInfo.imageLinks ?\r\n                    `<img class="cover" src="${data.items[i].volumeInfo.imageLinks.thumbnail}" alt="book cover"></img>` :\r\n                    "<img class=\\"cover\\" src=\\"img/nocover.png\\" alt=\\"no cover\\"></img>"}\r\n                <div class="description">\r\n                    ${data.items[i].volumeInfo.authors ?\r\n                    `<div class="author">${data.items[i].volumeInfo.authors}</div>` :\r\n                    "<div class=\\"author\\"></div>"}\r\n                    <div class="title">${data.items[i].volumeInfo.title}</div>\r\n                    ${data.items[i].volumeInfo.ratingsCount ?\r\n                        `<div class="rating">${ratingStars(Math.round(data.items[i].volumeInfo.averageRating))} ${data.items[i].volumeInfo.ratingsCount} review</div>`\r\n                        : "<div></div>"}\r\n                        <div class="review">${review(data.items[i].volumeInfo.description)}</div>\r\n                    ${data.items[i].saleInfo.retailPrice ?\r\n                        `<div class="price">${formatter.format(data.items[i].saleInfo.retailPrice.amount)}</div>\r\n                        <button class="buy" data-id=${data.items[i].id}>${purchaseBtnLabel(data.items[i].id)}</button>`\r\n                        : `<div class="price">${data.items[i].saleInfo.saleability.replace(/_/g, " ")}</div>`}\r\n                </div>\r\n            </div>`;\r\n        }\r\n    })\r\n    .catch((error) => {\r\n        console.log(error);\r\n    });\r\n}\r\n\r\ncatalog.forEach(link => {\r\n    link.addEventListener("click", changeCategory);\r\n});\r\n\r\nfunction changeCategory(link) {\r\n    cards.innerHTML = "";\r\n    document.querySelector(".active").classList.remove("active");\r\n    link.target.classList.add("active");\r\n    let category = link.target.innerText;\r\n    bookRequest(category, 0);\r\n}\r\n\r\nloadMore.addEventListener("click", () => {\r\n    let activeCategory = document.querySelector(".active").innerText;\r\n    let cardNumber = document.querySelectorAll(".card");\r\n    bookRequest(activeCategory, cardNumber.length);\r\n});\r\n    \r\nfunction ratingStars(num) {\r\n    let stars = "";\r\n    for (let i = 0; i < num; i++) {\r\n        stars += `<svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="#F2C94C"/>\r\n        </svg>`;\r\n    }\r\n    for (let i = 0; i < 5 - num; i++) {\r\n        stars += `<svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="#EEEDF5"/>\r\n        </svg>`;\r\n    }\r\n    return stars;\r\n}\r\n    \r\nfunction review(description) {\r\n    if (description) {\r\n        if (description.length > 90) {\r\n            return `${description.slice(0, 90)}â€¦`;\r\n        } else {\r\n            return description;\r\n        }\r\n    } else {\r\n        return "no description";\r\n    }\r\n}\r\n    \r\nfunction purchase(btn) {\r\n    if (btn.innerText === BUYNOW) {\r\n        if (localStorage.getItem("cartId") == null) {\r\n            let arr = Array(btn.dataset.id);\r\n            localStorage.setItem("cartId", JSON.stringify(arr));\r\n        } else {\r\n            let arr = JSON.parse(localStorage.getItem("cartId"));\r\n            if (arr.length == 0) {\r\n                let i = btn.dataset.id;\r\n                arr = Array(i);\r\n                localStorage.setItem("cartId", JSON.stringify(arr));\r\n            } else {\r\n                let i = btn.dataset.id;\r\n                arr.push(i);\r\n                localStorage.setItem("cartId", JSON.stringify(arr));\r\n            }\r\n        }\r\n    \r\n        btn.innerText = INTHECART;\r\n        cart.dataset.styleType = Number(cart.dataset.styleType) + 1;\r\n        localStorage.setItem("cartCount", `${cart.dataset.styleType}`);\r\n        document.querySelector(":root").style.setProperty("--hidden", "visible");\r\n    \r\n    } else if (btn.innerText === INTHECART) {\r\n        let arr = JSON.parse(localStorage.getItem("cartId"));\r\n        let i = arr.filter(item => {\r\n            return item != btn.dataset.id;\r\n        });\r\n       \r\n        localStorage.setItem("cartId", JSON.stringify(i));\r\n        btn.innerText = BUYNOW;\r\n        cart.dataset.styleType = Number(cart.dataset.styleType) - 1;\r\n        localStorage.setItem("cartCount", `${cart.dataset.styleType}`);\r\n        cartCheck();\r\n    }\r\n}\r\n    \r\nfunction purchaseBtnLabel(btnId) {\r\n    if (localStorage.getItem("cartId") == null) {\r\n        return BUYNOW;\r\n    } else {\r\n        let cartArray = JSON.parse(localStorage.getItem("cartId"));\r\n        let i = cartArray.filter(item => {\r\n            return item == btnId;\r\n        });\r\n        \r\n        if (i.length > 0) {\r\n            return INTHECART;\r\n        } else {\r\n            return BUYNOW;\r\n        }\r\n    }\r\n}\r\n\r\ndocument.addEventListener("click", (e) => {\r\n    const {target} = e;\r\n    if (target.tagName === "BUTTON" && target.classList.contains("buy")) {\r\n        purchase(target);\r\n    }\r\n});\r\n    \r\nfunction cartCheck() {\r\n    if (localStorage.getItem("cartCount") > 0) {\r\n        document.querySelector(":root").style.setProperty("--hidden", "visible");\r\n    } else {\r\n        document.querySelector(":root").style.setProperty("--hidden", "hidden");\r\n    }\r\n}\n\n//# sourceURL=webpack://bookshop-on-google-books-api/./src/js/books.js?')},"./src/js/slider.js":()=>{eval('document.addEventListener("DOMContentLoaded", () => {\r\n  startSlider();\r\n});\r\n  \r\nfunction startSlider() {\r\n  setInterval(() => moveForward(), 5000);\r\n}\r\n\r\nlet position = 0;\r\nlet slider = document.querySelector(".slider");\r\nlet dots = document.querySelector(".dots").children;\r\n\r\nconst imagesSet = [\r\n  "img/banner0.png",\r\n  "img/banner1.png",\r\n  "img/banner2.png",\r\n];\r\n  \r\nslider.src = "img/banner0.png";\r\n    \r\nfunction moveForward() {\r\n  position = Number(position) + 1;\r\n  \r\n  if (position > imagesSet.length - 1) {\r\n    position = 0;\r\n    slider.src = `${imagesSet[position]}`;\r\n  } else {\r\n    slider.src = `${imagesSet[position]}`;\r\n  }\r\n  for (let key of dots) {\r\n    key.style.backgroundColor = "#EFEEF6";\r\n  }\r\n  document.querySelector(`.dot${position}`).style.backgroundColor = "#9E98DC";\r\n}\r\n  \r\nfunction selectDot(e) {\r\n  let index = e.target.className;\r\n  index = index.slice(-1);\r\n  position = index;\r\n  for (let key of dots) {\r\n    key.style.backgroundColor = "#EFEEF6";\r\n  }\r\n  slider.src = `${imagesSet[position]}`;\r\n  document.querySelector(`.dot${position}`).style.backgroundColor = "#9E98DC";\r\n}\r\n \r\nArray.from(dots).forEach(dot => {\r\n  dot.addEventListener("click", selectDot);\r\n});\n\n//# sourceURL=webpack://bookshop-on-google-books-api/./src/js/slider.js?')}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(void 0!==e)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(r,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/index.js")})();